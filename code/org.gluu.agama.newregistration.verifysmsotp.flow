// Start subflow for user otp code validation
Flow org.gluu.agama.newregistration.verifysmsotp
     Basepath ""
     Timeout 900 seconds
     Inputs userRegistrationService phone lang
// Log flow imputs provided by the flow caller.
Log "@info Information received from the caller: " phone lang
otpUiFeedback = {}
resendCount = 0
validationAttempts = 0
maxSMS = Repeat 20 times max
     RRF "__________" 
     When 
          Finish __________
     Otherwise
          When 
               Log "@ " __________
               When 
                    Log "@ " __________
                    Finish __________
               Call __________#__________ 
               Log "@ " __________
               Call __________#__________ 
               When 
                    Log "@ " __________
               Log "@ " __________
          Otherwise
               Log "@ " __________
               Call __________#__________ 
               Log "@ " __________
               When 
                    Log "@ " __________
                    Finish __________
               Otherwise
                    Call __________#__________ 
                    Log "@ " __________
                    When 
                         Log "@ " __________
                         Finish __________
                    Otherwise
                         Log "@ " __________
Log "@ " __________
Finish __________